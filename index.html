<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Blog Pokemon</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Oswald:wght@200&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>
    <style>
      header {
        width: 100%;
        background-color: #333;
        color: #fff;
        padding: 1rem 0;
        text-align: center;
        font-size: 2rem;
        position: fixed;
        top: 0;
        left: 0;
        z-index: 1000;
        border: 3px solid #ffffff;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
      }

      footer {
        width: 100%;
        background-color: #333;
        color: #fff;
        padding: 1rem 0;
        text-align: center;
        position: fixed;
        bottom: 0;
        left: 0;
        z-index: 1000;
        border: 3px solid #ffffff;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
      }

      main {
        flex: 1;
        padding: 2rem;
        max-width: 90%;
        margin: 2rem auto;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
      }

      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }

      html {
        font-family: "Roboto", sans-serif;
        font-size: 12px;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        background: #1488cc;
        background: -webkit-linear-gradient(to right, #2b32b2, #1488cc);
        background: linear-gradient(to right, #2b32b2, #1488cc);
        min-height: 100vh;
        padding-top: 4rem;
        padding-bottom: 4rem;
      }

      .blog_post {
        background: #fff;
        max-width: 500px;
        margin: 10px;
        border-radius: 10px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        width: calc(50% - 30px);
      }

      .img_ball {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        background: linear-gradient(90deg, #ff9966, #ff5e62);
      }

      .img_ball img {
        height: 80px;
        width: 80px;
        border-radius: 50%;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
      }

      .cards {
        padding: 20px;
      }

      h1 {
        margin-bottom: 1rem;
        color: #333;
        font-size: 24px;
      }

      p {
        margin-bottom: 0.5rem;
        font-size: 14px;
        line-height: 1.6;
        color: #666;
      }

      .posts-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space;
        align-items: stretch;
        padding: 0;
        list-style: none;
      }

      @media only screen and (max-width: 650px) {
        .blog_post {
          width: 100%;
          margin: 10px 0;
        }
      }

      @keyframes load {
        0%, 10% {
          --a: 0deg;
          --h: 0;
        }
        100% {
          --a: 360deg;
          --h: 100%;
        }
      }

      .loader {
        padding: 2rem 4rem;
        font-family: monospace;
        font-weight: bold;
        color: hsl(0, 0%, 100%);
        border-style: solid;
        border-width: 1vmin;
        font-size: 2rem;
        --charge: hsl(var(--h), 80%, 50%);
        border-image: conic-gradient(from var(--a) at 50% 50%, var(--charge) var(--a), transparent calc(var(--a) + 0.5deg)) 30;
        animation: load 2s infinite ease-in-out;
        display: inline-block;
      }

      .empty-state {
        text-align: center;
        padding: 50px;
        color: #fff;
      }

      .empty-state h2 {
        font-size: 24px;
        margin-bottom: 20px;
      }

      .empty-state p {
        font-size: 18px;
        color: #bbb;
      }

      .empty-state img {
        max-width: 100%;
        height: auto;
        margin-bottom: 20px;
      }

      .error-message {
        color: #ff3860;
        text-align: center;
        padding: 20px;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>
    <script type="text/babel">
      const PropTypes = {
        string: () => {},
      };

      const Header = () => {
        const styles = {};
        return <header style={styles}>BLOG POKEMON</header>;
      };

      const Footer = () => {
        const styles = {};
        return <footer style={styles}>Copyright 2024 UVG</footer>;
      };

      const Post = ({
        title,
        content,
        pokemon_name,
        tipo_pokemon,
        grupo,
        cualidad,
        region,
        descripcion,
      }) => {
        return (
          <div className="blog_post">
            <div className="img_ball">
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/51/Pokebola-pokeball-png-0.png/800px-Pokebola-pokeball-png-0.png"
                alt={pokemon_name}
              />
            </div>
            <div className="cards">
              <h1>{title}</h1>
              <p>Contenido: {content}</p>
              <p>Nombre: {pokemon_name}</p>
              <p>Tipo: {tipo_pokemon}</p>
              <p>Grupo: {grupo}</p>
              <p>Cualidad: {cualidad}</p>
              <p>Región: {region}</p>
              <p>Descripción: {descripcion}</p>
            </div>
          </div>
        );
      };

      const Posts = () => {
        const styles = {};
        const [posts, setPosts] = React.useState([]);
        const [loading, setLoading] = React.useState(true);
        const [error, setError] = React.useState(null);

        const getPosts = async () => {
          try {
            const apiResponse = await fetch(
              "https://api.tiburoncin.lat/22305/posts"
            );

            if (!apiResponse.ok) {
              throw new Error(`HTTP error! status: ${apiResponse.status}`); // Lanza un error si la respuesta no es exitosa
            }

            const jsonPosts = await apiResponse.json();

            if (!Array.isArray(jsonPosts)) { // Verifica si jsonPosts es un arreglo
              throw new Error("Formato de datos incorrecto"); // Lanza un error si no lo es
            }

            const formattedPosts = jsonPosts.map(
              ({
                title,
                content,
                pokemon_name,
                tipo_pokemon,
                grupo,
                cualidad,
                region,
                descripcion,
              }) => ({
                title,
                content,
                pokemon_name,
                tipo_pokemon,
                grupo,
                cualidad,
                region,
                descripcion,
              })
            );

            setPosts(formattedPosts);
          } catch (error) {
            console.error("Error fetching posts:", error);
          } finally {
            setLoading(false);
          }
        };

        React.useEffect(() => {
          getPosts();
        }, []);

        if (loading) {
          return <Loading />;
        }

        if (error) {
          return <div className="error-message">Error: {error}</div>;
        }

        if (posts.length === 0 && !loading) {
          return <EmptyState />;
        }

        return (
          <ul className="posts-container">
            {posts.map((post) => (
              <Post
                key={post.id}
                title={post.title}
                content={post.content}
                pokemon_name={post.pokemon_name}
                tipo_pokemon={post.tipo_pokemon}
                grupo={post.grupo}
                cualidad={post.cualidad}
                region={post.region}
                descripcion={post.descripcion}
              />
            ))}
          </ul>
        );
      };

      Post.propTypes = {
        title: PropTypes.string.isRequired,
        content: PropTypes.string.isRequired,
        pokemon_name: PropTypes.string.isRequired,
        tipo_pokemon: PropTypes.string.isRequired,
        grupo: PropTypes.string.isRequired,
        cualidad: PropTypes.string.isRequired,
        region: PropTypes.string.isRequired,
        descripcion: PropTypes.string.isRequired
      };

      const App = () => {
        const styles = {};
        return (
          <main style={styles}>
            <Header />
            <Posts />
            <Footer />
          </main>
        );
      };

      const Loading = () => {
        return (
          <div className="loader">Cargando...</div>
        );
      };

      const EmptyState = () => {
        return (
          <div className="empty-state">
            <h2>No hay posts para mostrar</h2>
            <p>Parece que no hay contenido en este momento. ¡Regresa más tarde!</p>
            <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/778.png" alt="No hay posts disponibles"/>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
